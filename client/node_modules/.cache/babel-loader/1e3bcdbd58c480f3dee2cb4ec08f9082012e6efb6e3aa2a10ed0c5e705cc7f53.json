{"ast":null,"code":"var _jsxFileName = \"D:\\\\DevMate\\\\client\\\\src\\\\pages\\\\NotificationPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { socket } from \"../socket\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst iconForType = type => {\n  switch (type) {\n    case \"follow\":\n      return /*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"w-5 h-5 text-green-400\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        viewBox: \"0 0 24 24\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          d: \"M18 9a3 3 0 11-6 0 3 3 0 016 0zM6 21v-2a4 4 0 014-4h0a4 4 0 014 4v2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 9\n      }, this);\n    case \"comment\":\n      return /*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"w-5 h-5 text-blue-400\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        viewBox: \"0 0 24 24\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          d: \"M17 8h2a2 2 0 012 2v8a2 2 0 01-2 2H7a2 2 0 01-2-2V10a2 2 0 012-2h2m4-4h4a2 2 0 012 2v4a2 2 0 01-2 2h-4a2 2 0 01-2-2V6a2 2 0 012-2z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this);\n    case \"like\":\n      return /*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"w-5 h-5 text-pink-400\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        viewBox: \"0 0 24 24\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          d: \"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this);\n    default:\n      return /*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"w-5 h-5 text-gray-400\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        viewBox: \"0 0 24 24\",\n        children: /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"12\",\n          cy: \"12\",\n          r: \"10\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this);\n  }\n};\nconst TrashIcon = props => /*#__PURE__*/_jsxDEV(\"svg\", {\n  ...props,\n  className: \"w-5 h-5 text-red-400 hover:text-red-600 transition \" + (props.className || \"\"),\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M8 7V5a2 2 0 012-2h2a2 2 0 012 2v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 73,\n  columnNumber: 3\n}, this);\n_c = TrashIcon;\nconst DotsVerticalIcon = props => /*#__PURE__*/_jsxDEV(\"svg\", {\n  ...props,\n  className: \"w-6 h-6 text-gray-400 \" + (props.className || \"\"),\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  viewBox: \"0 0 24 24\",\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"5\",\n    r: \"1.5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"1.5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"19\",\n    r: \"1.5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 93,\n  columnNumber: 3\n}, this);\n_c2 = DotsVerticalIcon;\nconst NotificationPage = () => {\n  _s();\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showConfirm, setShowConfirm] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const [showMenu, setShowMenu] = useState(false);\n  const menuRef = React.useRef();\n  const {\n    user\n  } = useAuth();\n\n  // Close menu on outside click\n  useEffect(() => {\n    if (!showMenu) return;\n    const handler = e => {\n      if (menuRef.current && !menuRef.current.contains(e.target)) setShowMenu(false);\n    };\n    document.addEventListener(\"mousedown\", handler);\n    return () => document.removeEventListener(\"mousedown\", handler);\n  }, [showMenu]);\n  useEffect(() => {\n    const fetchNotifications = async () => {\n      try {\n        const res = await axios.get(\"/api/notifications\");\n        setNotifications(res.data);\n      } catch (err) {\n        setNotifications([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchNotifications();\n  }, []);\n\n  // Real-time notifications\n  useEffect(() => {\n    if (!user) return;\n    socket.io.opts.query = {\n      userId: user.id\n    };\n    socket.connect();\n    socket.on(\"notification\", notification => {\n      console.log(\"Received real-time notification:\", notification);\n      setNotifications(prev => {\n        // If notification already exists, update it; else, add it\n        const exists = prev.find(n => n._id === notification._id);\n        if (exists) {\n          return prev.map(n => n._id === notification._id ? {\n            ...n,\n            ...notification\n          } : n);\n        } else {\n          return [notification, ...prev];\n        }\n      });\n    });\n    return () => {\n      socket.off(\"notification\");\n      socket.disconnect();\n    };\n  }, [user]);\n  const handleDeleteAll = async () => {\n    setDeleting(true);\n    try {\n      await axios.delete(\"/api/notifications/all\");\n      setNotifications([]);\n      setShowConfirm(false);\n    } catch (err) {\n      // Optionally show error\n    } finally {\n      setDeleting(false);\n    }\n  };\n  const handleMarkAllAsRead = async () => {\n    try {\n      await axios.put(\"/api/notifications/mark-all-read\");\n      // Immediately update local state\n      setNotifications(prev => prev.map(n => ({\n        ...n,\n        read: true\n      })));\n      // Refetch to ensure sync with backend\n      const res = await axios.get(\"/api/notifications\");\n      setNotifications(res.data);\n      console.log(\"Notifications after mark all as read:\", res.data);\n    } catch (err) {\n      // Optionally show error\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full px-2 sm:px-4 py-8 pb-32 sm:pb-12\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center mb-6 relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"w-7 h-7 text-blue-400 mr-3\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        viewBox: \"0 0 24 24\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          d: \"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-mono font-bold text-white\",\n        children: \"Notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"ml-auto text-xs text-blue-400 hover:underline font-mono hidden sm:inline\",\n        onClick: handleMarkAllAsRead,\n        children: \"Mark all as read\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"hidden sm:inline ml-6 p-1 rounded-full border-2 border-red-400 hover:border-red-600 hover:bg-gray-800 focus:outline-none transition\",\n        title: \"Delete all notifications\",\n        onClick: () => setShowConfirm(true),\n        children: /*#__PURE__*/_jsxDEV(TrashIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sm:hidden ml-auto relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"p-2 rounded-full hover:bg-gray-800 focus:outline-none\",\n          onClick: () => setShowMenu(v => !v),\n          \"aria-label\": \"Open menu\",\n          children: /*#__PURE__*/_jsxDEV(DotsVerticalIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), showMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: menuRef,\n          className: \"absolute right-0 mt-2 w-44 bg-gray-900 border border-gray-700 rounded-lg shadow-lg z-20\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-full text-left px-4 py-3 text-blue-400 hover:bg-gray-800 font-mono text-sm\",\n            onClick: () => {\n              setShowMenu(false);\n              handleMarkAllAsRead();\n            },\n            children: \"Mark all as read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-full text-left px-4 py-3 text-red-400 hover:bg-gray-800 font-mono text-sm border-t border-gray-800\",\n            onClick: () => {\n              setShowMenu(false);\n              setShowConfirm(true);\n            },\n            children: \"Delete all\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), showConfirm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-900 border border-gray-700 rounded-lg p-6 max-w-sm w-full shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(TrashIcon, {\n            className: \"w-6 h-6 mr-2 text-red-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-lg font-bold text-white font-mono\",\n            children: \"Delete All Notifications?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-300 mb-6 font-mono\",\n          children: [\"This action\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-400 font-bold\",\n            children: \"cannot be undone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this), \".\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this), \"Are you sure you want to permanently delete \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"all\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 59\n          }, this), \" your notifications?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"px-4 py-2 rounded bg-gray-700 text-gray-200 hover:bg-gray-600 font-mono\",\n            onClick: () => setShowConfirm(false),\n            disabled: deleting,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 font-mono font-bold shadow\",\n            onClick: handleDeleteAll,\n            disabled: deleting,\n            children: deleting ? \"Deleting...\" : \"Delete All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-gray-400 font-mono mt-12\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }, this) : notifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center justify-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-gray-400 font-mono text-lg\",\n        children: \"No notifications yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: [notifications.map(n => {\n        var _n$fromUser, _n$fromUser2, _n$fromUser3;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-start bg-gray-900/70 rounded-lg p-4 border border-gray-700 shadow transition hover:bg-gray-800 ${!n.read ? \"ring-2 ring-blue-500/30\" : \"\"} w-full min-w-0`,\n          style: {\n            width: \"100%\",\n            maxWidth: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mr-3 mt-1\",\n            children: iconForType(n.type)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [(_n$fromUser = n.fromUser) !== null && _n$fromUser !== void 0 && _n$fromUser.username ? /*#__PURE__*/_jsxDEV(Link, {\n              to: `/profile/${n.fromUser.username}`,\n              className: \"font-mono text-white hover:underline hover:text-x-blue transition-colors\",\n              children: n.fromUser.displayName || n.fromUser.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-mono text-white\",\n              children: ((_n$fromUser2 = n.fromUser) === null || _n$fromUser2 === void 0 ? void 0 : _n$fromUser2.displayName) || ((_n$fromUser3 = n.fromUser) === null || _n$fromUser3 === void 0 ? void 0 : _n$fromUser3.username) || \"Someone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-mono text-gray-300\",\n              children: n.type === \"like\" ? \" liked your post.\" : n.type === \"comment\" ? \" commented on your post.\" : n.type === \"follow\" ? \" followed you.\" : \" sent a notification.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500 mt-1 font-mono\",\n              children: new Date(n.createdAt).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this), !n.read && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"w-2 h-2 bg-blue-400 rounded-full ml-3 mt-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 17\n          }, this)]\n        }, n._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this);\n      }), notifications.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center mt-10\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-blue-400 font-mono text-sm opacity-80 px-4 py-2 rounded-lg bg-gray-900/60 border border-blue-900/30 shadow\",\n          children: \"\\u2014 End of notifications \\u2014\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n};\n_s(NotificationPage, \"c39O0V/8zin93sh1NF+y+F0d1xk=\", false, function () {\n  return [useAuth];\n});\n_c3 = NotificationPage;\nexport default NotificationPage;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"TrashIcon\");\n$RefreshReg$(_c2, \"DotsVerticalIcon\");\n$RefreshReg$(_c3, \"NotificationPage\");","map":{"version":3,"names":["React","useEffect","useState","axios","socket","useAuth","Link","jsxDEV","_jsxDEV","iconForType","type","className","fill","stroke","strokeWidth","viewBox","children","strokeLinecap","strokeLinejoin","d","fileName","_jsxFileName","lineNumber","columnNumber","cx","cy","r","TrashIcon","props","_c","DotsVerticalIcon","_c2","NotificationPage","_s","notifications","setNotifications","loading","setLoading","showConfirm","setShowConfirm","deleting","setDeleting","showMenu","setShowMenu","menuRef","useRef","user","handler","e","current","contains","target","document","addEventListener","removeEventListener","fetchNotifications","res","get","data","err","io","opts","query","userId","id","connect","on","notification","console","log","prev","exists","find","n","_id","map","off","disconnect","handleDeleteAll","delete","handleMarkAllAsRead","put","read","onClick","title","v","ref","disabled","length","_n$fromUser","_n$fromUser2","_n$fromUser3","style","width","maxWidth","fromUser","username","to","displayName","Date","createdAt","toLocaleString","_c3","$RefreshReg$"],"sources":["D:/DevMate/client/src/pages/NotificationPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { socket } from \"../socket\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst iconForType = (type) => {\r\n  switch (type) {\r\n    case \"follow\":\r\n      return (\r\n        <svg\r\n          className=\"w-5 h-5 text-green-400\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M18 9a3 3 0 11-6 0 3 3 0 016 0zM6 21v-2a4 4 0 014-4h0a4 4 0 014 4v2\"\r\n          />\r\n        </svg>\r\n      );\r\n    case \"comment\":\r\n      return (\r\n        <svg\r\n          className=\"w-5 h-5 text-blue-400\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M17 8h2a2 2 0 012 2v8a2 2 0 01-2 2H7a2 2 0 01-2-2V10a2 2 0 012-2h2m4-4h4a2 2 0 012 2v4a2 2 0 01-2 2h-4a2 2 0 01-2-2V6a2 2 0 012-2z\"\r\n          />\r\n        </svg>\r\n      );\r\n    case \"like\":\r\n      return (\r\n        <svg\r\n          className=\"w-5 h-5 text-pink-400\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n          />\r\n        </svg>\r\n      );\r\n    default:\r\n      return (\r\n        <svg\r\n          className=\"w-5 h-5 text-gray-400\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n        </svg>\r\n      );\r\n  }\r\n};\r\n\r\nconst TrashIcon = (props) => (\r\n  <svg\r\n    {...props}\r\n    className={\r\n      \"w-5 h-5 text-red-400 hover:text-red-600 transition \" +\r\n      (props.className || \"\")\r\n    }\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    strokeWidth=\"2\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M8 7V5a2 2 0 012-2h2a2 2 0 012 2v2\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst DotsVerticalIcon = (props) => (\r\n  <svg\r\n    {...props}\r\n    className={\"w-6 h-6 text-gray-400 \" + (props.className || \"\")}\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    strokeWidth=\"2\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <circle cx=\"12\" cy=\"5\" r=\"1.5\" />\r\n    <circle cx=\"12\" cy=\"12\" r=\"1.5\" />\r\n    <circle cx=\"12\" cy=\"19\" r=\"1.5\" />\r\n  </svg>\r\n);\r\n\r\nconst NotificationPage = () => {\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const menuRef = React.useRef();\r\n  const { user } = useAuth();\r\n\r\n  // Close menu on outside click\r\n  useEffect(() => {\r\n    if (!showMenu) return;\r\n    const handler = (e) => {\r\n      if (menuRef.current && !menuRef.current.contains(e.target))\r\n        setShowMenu(false);\r\n    };\r\n    document.addEventListener(\"mousedown\", handler);\r\n    return () => document.removeEventListener(\"mousedown\", handler);\r\n  }, [showMenu]);\r\n\r\n  useEffect(() => {\r\n    const fetchNotifications = async () => {\r\n      try {\r\n        const res = await axios.get(\"/api/notifications\");\r\n        setNotifications(res.data);\r\n      } catch (err) {\r\n        setNotifications([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchNotifications();\r\n  }, []);\r\n\r\n  // Real-time notifications\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    socket.io.opts.query = { userId: user.id };\r\n    socket.connect();\r\n    socket.on(\"notification\", (notification) => {\r\n      console.log(\"Received real-time notification:\", notification);\r\n      setNotifications((prev) => {\r\n        // If notification already exists, update it; else, add it\r\n        const exists = prev.find((n) => n._id === notification._id);\r\n        if (exists) {\r\n          return prev.map((n) =>\r\n            n._id === notification._id ? { ...n, ...notification } : n\r\n          );\r\n        } else {\r\n          return [notification, ...prev];\r\n        }\r\n      });\r\n    });\r\n    return () => {\r\n      socket.off(\"notification\");\r\n      socket.disconnect();\r\n    };\r\n  }, [user]);\r\n\r\n  const handleDeleteAll = async () => {\r\n    setDeleting(true);\r\n    try {\r\n      await axios.delete(\"/api/notifications/all\");\r\n      setNotifications([]);\r\n      setShowConfirm(false);\r\n    } catch (err) {\r\n      // Optionally show error\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  const handleMarkAllAsRead = async () => {\r\n    try {\r\n      await axios.put(\"/api/notifications/mark-all-read\");\r\n      // Immediately update local state\r\n      setNotifications((prev) => prev.map((n) => ({ ...n, read: true })));\r\n      // Refetch to ensure sync with backend\r\n      const res = await axios.get(\"/api/notifications\");\r\n      setNotifications(res.data);\r\n      console.log(\"Notifications after mark all as read:\", res.data);\r\n    } catch (err) {\r\n      // Optionally show error\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full px-2 sm:px-4 py-8 pb-32 sm:pb-12\">\r\n      <div className=\"flex items-center mb-6 relative\">\r\n        <svg\r\n          className=\"w-7 h-7 text-blue-400 mr-3\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\r\n          />\r\n        </svg>\r\n        <h1 className=\"text-2xl font-mono font-bold text-white\">\r\n          Notifications\r\n        </h1>\r\n        {/* Desktop: Mark all as read + delete icon */}\r\n        <button\r\n          className=\"ml-auto text-xs text-blue-400 hover:underline font-mono hidden sm:inline\"\r\n          onClick={handleMarkAllAsRead}\r\n        >\r\n          Mark all as read\r\n        </button>\r\n        <button\r\n          className=\"hidden sm:inline ml-6 p-1 rounded-full border-2 border-red-400 hover:border-red-600 hover:bg-gray-800 focus:outline-none transition\"\r\n          title=\"Delete all notifications\"\r\n          onClick={() => setShowConfirm(true)}\r\n        >\r\n          <TrashIcon />\r\n        </button>\r\n        {/* Mobile: 3-dots menu */}\r\n        <div className=\"sm:hidden ml-auto relative\">\r\n          <button\r\n            className=\"p-2 rounded-full hover:bg-gray-800 focus:outline-none\"\r\n            onClick={() => setShowMenu((v) => !v)}\r\n            aria-label=\"Open menu\"\r\n          >\r\n            <DotsVerticalIcon />\r\n          </button>\r\n          {showMenu && (\r\n            <div\r\n              ref={menuRef}\r\n              className=\"absolute right-0 mt-2 w-44 bg-gray-900 border border-gray-700 rounded-lg shadow-lg z-20\"\r\n            >\r\n              <button\r\n                className=\"w-full text-left px-4 py-3 text-blue-400 hover:bg-gray-800 font-mono text-sm\"\r\n                onClick={() => {\r\n                  setShowMenu(false);\r\n                  handleMarkAllAsRead();\r\n                }}\r\n              >\r\n                Mark all as read\r\n              </button>\r\n              <button\r\n                className=\"w-full text-left px-4 py-3 text-red-400 hover:bg-gray-800 font-mono text-sm border-t border-gray-800\"\r\n                onClick={() => {\r\n                  setShowMenu(false);\r\n                  setShowConfirm(true);\r\n                }}\r\n              >\r\n                Delete all\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Confirmation Dialog */}\r\n      {showConfirm && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60\">\r\n          <div className=\"bg-gray-900 border border-gray-700 rounded-lg p-6 max-w-sm w-full shadow-lg\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <TrashIcon className=\"w-6 h-6 mr-2 text-red-500\" />\r\n              <span className=\"text-lg font-bold text-white font-mono\">\r\n                Delete All Notifications?\r\n              </span>\r\n            </div>\r\n            <div className=\"text-gray-300 mb-6 font-mono\">\r\n              This action{\" \"}\r\n              <span className=\"text-red-400 font-bold\">cannot be undone</span>.\r\n              <br />\r\n              Are you sure you want to permanently delete <b>all</b> your\r\n              notifications?\r\n            </div>\r\n            <div className=\"flex justify-end space-x-3\">\r\n              <button\r\n                className=\"px-4 py-2 rounded bg-gray-700 text-gray-200 hover:bg-gray-600 font-mono\"\r\n                onClick={() => setShowConfirm(false)}\r\n                disabled={deleting}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                className=\"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 font-mono font-bold shadow\"\r\n                onClick={handleDeleteAll}\r\n                disabled={deleting}\r\n              >\r\n                {deleting ? \"Deleting...\" : \"Delete All\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {loading ? (\r\n        <div className=\"text-center text-gray-400 font-mono mt-12\">\r\n          Loading...\r\n        </div>\r\n      ) : notifications.length === 0 ? (\r\n        <div className=\"flex flex-col items-center justify-center h-64\">\r\n          <div className=\"text-center text-gray-400 font-mono text-lg\">\r\n            No notifications yet.\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          {notifications.map((n) => (\r\n            <div\r\n              key={n._id}\r\n              className={`flex items-start bg-gray-900/70 rounded-lg p-4 border border-gray-700 shadow transition hover:bg-gray-800 ${\r\n                !n.read ? \"ring-2 ring-blue-500/30\" : \"\"\r\n              } w-full min-w-0`}\r\n              style={{ width: \"100%\", maxWidth: \"100%\" }}\r\n            >\r\n              <div className=\"mr-3 mt-1\">{iconForType(n.type)}</div>\r\n              <div className=\"flex-1\">\r\n                {n.fromUser?.username ? (\r\n                  <Link\r\n                    to={`/profile/${n.fromUser.username}`}\r\n                    className=\"font-mono text-white hover:underline hover:text-x-blue transition-colors\"\r\n                  >\r\n                    {n.fromUser.displayName || n.fromUser.username}\r\n                  </Link>\r\n                ) : (\r\n                  <span className=\"font-mono text-white\">\r\n                    {n.fromUser?.displayName || n.fromUser?.username || \"Someone\"}\r\n                  </span>\r\n                )}\r\n                <span className=\"font-mono text-gray-300\">\r\n                  {n.type === \"like\"\r\n                    ? \" liked your post.\"\r\n                    : n.type === \"comment\"\r\n                    ? \" commented on your post.\"\r\n                    : n.type === \"follow\"\r\n                    ? \" followed you.\"\r\n                    : \" sent a notification.\"}\r\n                </span>\r\n                <div className=\"text-xs text-gray-500 mt-1 font-mono\">\r\n                  {new Date(n.createdAt).toLocaleString()}\r\n                </div>\r\n              </div>\r\n              {!n.read && (\r\n                <span className=\"w-2 h-2 bg-blue-400 rounded-full ml-3 mt-2\" />\r\n              )}\r\n            </div>\r\n          ))}\r\n          {notifications.length > 0 && (\r\n            <div className=\"flex justify-center mt-10\">\r\n              <div className=\"text-blue-400 font-mono text-sm opacity-80 px-4 py-2 rounded-lg bg-gray-900/60 border border-blue-900/30 shadow\">\r\n                — End of notifications —\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}